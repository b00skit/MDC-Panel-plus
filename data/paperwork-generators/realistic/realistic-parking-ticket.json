{
    "id": "realistic-parking-ticket",
    "title": "Parking Ticket",
    "description": "A realistic parking ticket citation.",
    "icon": "SquareParking",
    "icon_color": "#1e6da5",
    "is_html_output": true,
    "custom_button_text": "Open MDC Record",
    "custom_button_link": "https://mdc.gta.world/record/{{vehicle_owner}}",
    "custom_button_replace_spaces": true,
    "output": "<table style=\"width:100%;font-family:'Times New Roman',serif;border-collapse:collapse;border:2px solid #111;background-color:white;color:#111;\">\n  <tbody>\n    <tr>\n      <td colspan=\"4\" style=\"text-align:center;padding:10px;border-bottom:2px solid #111;\">\n        <h1 style=\"font-family:Arial,sans-serif;font-size:1.6rem;font-weight:700;margin:0;text-transform:uppercase;\">County of Los Santos</h1>\n        <h2 style=\"font-family:Arial,sans-serif;font-size:1.05rem;font-weight:600;margin:2px 0 0;\">Notice of Parking Citation</h2>\n        <p style=\"margin:4px 0 0;font-size:0.85rem;\">{{officers.0.department}} &bull; {{officers.0.divDetail}}</p>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Citation #:</strong> {{citation_number}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Date of Issue:</strong> {{general.date}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Time Issued:</strong> {{general.time}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;font-weight:bold;text-align:right;background-color:#f3f4f6;\">PAY ON OR BEFORE: {{addDays general.date 28}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Officer:</strong> {{officers.0.name}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Badge #:</strong> {{officers.0.badgeNumber}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Unit / Call Sign:</strong> {{general.callSign}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Assignment:</strong> {{officer_assignment}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Officer Contact:</strong> {{officer_contact}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\" colspan=\"3\"><strong>Contest / Respond By:</strong> {{respond_by_date}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"background-color:#e5e7eb;padding:6px;border-top:2px solid #111;border-bottom:1px solid #bbb;text-align:center;font-weight:bold;\">Vehicle Identification</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Plate:</strong> {{#if vehicle_plate}}{{vehicle_plate}}{{else}}N/A{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Reg. State:</strong> {{#if vehicle_registration_state}}{{vehicle_registration_state}}{{else}}N/A{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Reg. Status:</strong> {{#if vehicle_registered}}Valid{{else}}Expired/None{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Owner:</strong> {{#if vehicle_owner}}{{vehicle_owner}}{{else}}N/A{{/if}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Year:</strong> {{vehicle_year}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Make &amp; Model:</strong> {{vehicle_make_model}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Body Style:</strong> {{vehicle_body_style}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Color:</strong> {{vehicle_color}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Vehicle Identification Number:</strong> {{vehicle_vin}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Insurance Status:</strong> {{#if vehicle_insured}}Insured{{else}}Uninsured{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Insurance Expiration:</strong> {{insurance_expiration}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Insurance Provider:</strong> {{vehicle_insurance_provider}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Policy #:</strong> {{vehicle_insurance_policy}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Location of Violation:</strong> {{location.street}}, {{location.district}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Observation Start:</strong> {{violation_observed_from}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Observation End:</strong> {{violation_observed_to}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Hazard Lights:</strong> {{#if hazard_lights}}Activated{{else}}Not Activated{{/if}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"background-color:#e5e7eb;padding:6px;border-top:2px solid #111;border-bottom:1px solid #bbb;text-align:center;font-weight:bold;\">Violation Details</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"3\"><strong>Violations:</strong><br/>\n        {{#any violations}}\n          <ul style=\"margin:4px 0 0 16px;padding:0;\">\n            {{#each violations}}\n              <li style=\"margin-bottom:2px;\">{{this}}</li>\n            {{/each}}\n          </ul>\n        {{else}}\n          None recorded\n        {{/any}}\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"padding:0;border:1px solid #bbb;border-left:none;border-right:none;\">\n        <table style=\"width:100%;border-collapse:collapse;\">\n          <tbody>\n            <tr style=\"background-color:#f3f4f6;\">\n              <td style=\"padding:6px;font-weight:bold;border-bottom:1px solid #ccc;\" colspan=\"3\">Description of Violation</td>\n              <td style=\"padding:6px;font-weight:bold;border-bottom:1px solid #ccc;text-align:right;\">Fine</td>\n            </tr>\n            {{#each charges}}\n            <tr>\n              <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"3\">{{#with (lookup @root.penalCode chargeId)}}{{charge}}{{/with}}</td>\n              <td style=\"padding:6px;border-bottom:1px solid #eee;text-align:right;\">${{fine}}</td>\n            </tr>\n            {{/each}}\n            <tr>\n              <td style=\"padding:6px;text-align:right;font-weight:bold;border-top:1px solid #111;\" colspan=\"3\">Total Amount Due:</td>\n              <td style=\"padding:6px;text-align:right;font-weight:bold;border-top:1px solid #111;\">${{charges_total_fine}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"padding:10px;white-space:pre-wrap;border-bottom:2px solid #111;\">{{parking_reasons}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"background-color:#e5e7eb;padding:6px;border-top:2px solid #111;border-bottom:1px solid #bbb;text-align:center;font-weight:bold;\">Tow / Additional Actions</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Tow Authorized:</strong> {{#if tow_authorized}}Yes{{else}}No{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Photographs Taken:</strong> {{#if photographs_taken}}Yes{{else}}No{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Tow Company:</strong> {{tow_company}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Tow Destination:</strong> {{tow_destination}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Inventory Reference #:</strong> {{inventory_number}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Notes:</strong> {{additional_notes}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"padding:8px;font-size:0.85rem;border-top:1px solid #bbb;background-color:#f9fafb;\"><strong>Court Filing Notice:</strong> Any court appearance related to this citation must be initiated through the Los Santos Greg E. Joplin Courthouse. Cases must be filed in advance via the official e-form before a hearing will be scheduled.</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"padding:8px;font-size:0.85rem;white-space:pre-wrap;border-top:1px solid #bbb;\">{{payment_instructions}}</td>\n    </tr>\n  </tbody>\n</table>",
    "form": [
        {
            "type": "section",
            "title": "Citation Details"
        },
        {
            "type": "general",
            "name": "general"
        },
        {
            "type": "hidden",
            "name": "citation_number",
            "generateValue": {
                "type": "pattern",
                "pattern": "PT-{{date:MMM}}-{{digits:5}}",
                "uppercase": true
            }
        },
        {
            "type": "section",
            "title": "Officer Information"
        },
        {
            "type": "officer",
            "name": "officers",
            "showBadgeNumber": true,
            "showDivDetail": true,
            "multi": false
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "officer_assignment",
                    "label": "Assignment / Beat",
                    "placeholder": "e.g. Central Parking Enforcement"
                },
                {
                    "type": "text",
                    "name": "officer_contact",
                    "label": "Officer Contact Number",
                    "placeholder": "e.g. (555) 010-4455"
                }
            ]
        },
        {
            "type": "section",
            "title": "Vehicle Identification"
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "better-switch",
                    "name": "vehicle_registered",
                    "label": "Registration Status",
                    "dataOn": "Registered",
                    "dataOff": "Unregistered",
                    "defaultValue": true
                },
                {
                    "type": "text",
                    "name": "vehicle_owner",
                    "label": "Registered Owner",
                    "placeholder": "Firstname Lastname",
                    "stipulation": {
                        "field": "vehicle_registered",
                        "value": true
                    }
                },
                {
                    "type": "text",
                    "name": "vehicle_plate",
                    "label": "Identification Plate",
                    "placeholder": "###XXX",
                    "stipulation": {
                        "field": "vehicle_registered",
                        "value": true
                    }
                },
                {
                    "type": "text",
                    "name": "vehicle_registration_state",
                    "label": "Registration State",
                    "placeholder": "SA",
                    "stipulation": {
                        "field": "vehicle_registered",
                        "value": true
                    }
                }
            ]
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "datalist",
                    "name": "vehicle_make_model",
                    "label": "Make & Model",
                    "placeholder": "e.g. Benefactor Dubsta",
                    "optionsSource": "vehicles",
                    "required": true
                },
                {
                    "type": "text",
                    "name": "vehicle_body_style",
                    "label": "Body Style",
                    "placeholder": "e.g. SUV"
                },
                {
                    "type": "text",
                    "name": "vehicle_color",
                    "label": "Primary Color",
                    "placeholder": "e.g. Silver"
                }
            ]
        },
        {
            "type": "text",
            "name": "vehicle_vin",
            "label": "Vehicle Identification Number",
            "placeholder": "17-character VIN"
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "better-switch",
                    "name": "vehicle_insured",
                    "label": "Insurance Status",
                    "dataOn": "Insured",
                    "dataOff": "Uninsured",
                    "defaultValue": true
                }
            ]
        },
        {
            "type": "text",
            "name": "insurance_expiration",
            "label": "Insurance Expiration",
            "placeholder": "DD/MM/YYYY",
            "stipulation": {
                "field": "vehicle_insured",
                "value": true
            }
        },
        {
            "type": "section",
            "title": "Location & Observation"
        },
        {
            "type": "location",
            "name": "location",
            "showDistrict": true
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "violation_observed_from",
                    "label": "Observation Start",
                    "placeholder": "HH:MM"
                },
                {
                    "type": "text",
                    "name": "violation_observed_to",
                    "label": "Observation End",
                    "placeholder": "HH:MM"
                }
            ]
        },
        {
            "type": "better-switch",
            "name": "hazard_lights",
            "label": "Hazard Lights",
            "dataOn": "Activated",
            "dataOff": "Not Activated"
        },
        {
            "type": "section",
            "title": "Violation Details"
        },
        {
            "type": "multi-select",
            "name": "violations",
            "label": "Violations",
            "placeholder": "Select all applicable violations",
            "options": [
                {
                    "value": "Failed to pay vehicular insurance within the time required by law on any public road.",
                    "label": "Uninsured Vehicle"
                },
                {
                    "value": "Next to a fire hydrant, and/or on a firelane marked by red lines.",
                    "label": "Fire Hydrant/Firelane"
                },
                {
                    "value": "Facing opposing traffic.",
                    "label": "Facing Opposing Traffic"
                },
                {
                    "value": "Inside any tunnel.",
                    "label": "In Tunnel"
                },
                {
                    "value": "On any freeway.",
                    "label": "On Freeway"
                },
                {
                    "value": "On a bridge outside of the City of Los Santos.",
                    "label": "On Bridge (Outside LS)"
                },
                {
                    "value": "Parking a non-electric vehicle into a parking space with an electric charger.",
                    "label": "Non-EV in EV Spot"
                },
                {
                    "value": "In a manner that a vehicle takes up two parking spaces.",
                    "label": "Taking Two Spaces"
                },
                {
                    "value": "No more than 2 motorcycles may park abreast in 1 parking space.",
                    "label": "Motorcycle Parking Violation"
                },
                {
                    "value": "In a fashion which blocks the flow of traffic.",
                    "label": "Blocking Traffic Flow"
                },
                {
                    "value": "In a manner that obstructs a lane of traffic and prevents traffic from properly flowing.",
                    "label": "Obstructing Traffic Lane"
                },
                {
                    "value": "In a manner that obstructs an alleyway used by traffic.",
                    "label": "Obstructing Alleyway"
                },
                {
                    "value": "In a manner that obstructs a parking lot and prevents vehicles from leaving or entering.",
                    "label": "Obstructing Parking Lot"
                },
                {
                    "value": "In front of or obstructing a private driveway or an entrance or exit to a private road or path.",
                    "label": "Obstructing Driveway/Entrance"
                },
                {
                    "value": "In the immediate ambulatory parking or bay area of a hospital or clinic.",
                    "label": "Obstructing Hospital/Clinic Area"
                },
                {
                    "value": "On or within range of railroad tracks.",
                    "label": "On Railroad Tracks"
                },
                {
                    "value": "At or near a helipad or an aircraft landing zone.",
                    "label": "Obstructing Helipad/Landing Zone"
                },
                {
                    "value": "Within a marked crosswalk.",
                    "label": "In Crosswalk"
                },
                {
                    "value": "On any part of a sidewalk.",
                    "label": "On Sidewalk"
                },
                {
                    "value": "On any sidewalk that completely obstructs pedestrian foot traffic, or on any median.",
                    "label": "Obstructing Sidewalk/Median"
                },
                {
                    "value": "In the immediate vicinity of the Banks entrance, including the sidewalk adjacent to the metal barriers.",
                    "label": "Obstructing Bank Entrance"
                }
            ]
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "violation_code",
                    "label": "Municipal Code",
                    "placeholder": "e.g. LSCC \u00a712.21"
                },
                {
                    "type": "text",
                    "name": "violation_section",
                    "label": "Section / Subsection",
                    "placeholder": "e.g. (a)(2)"
                }
            ]
        },
        {
            "type": "section",
            "title": "Charges"
        },
        {
            "type": "charge",
            "name": "charges",
            "showClass": false,
            "showOffense": true,
            "allowedTypes": {
                "I": true
            },
            "customFields": [
                {
                    "type": "text",
                    "name": "fine",
                    "label": "Fine",
                    "placeholder": "Fine Amount"
                }
            ]
        },
        {
            "type": "hidden",
            "name": "charges_total_fine",
            "value": "{{#with (sum (pluck charges 'fine'))}}{{this}}{{/with}}"
        },
        {
            "type": "textarea",
            "name": "parking_reasons",
            "label": "Narrative / Remarks",
            "placeholder": "Detail the violation as observed, including any relevant signage, distance to hydrant, or witness statements...",
            "required": true
        },
        {
            "type": "section",
            "title": "Tow / Additional Actions"
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "better-switch",
                    "name": "tow_authorized",
                    "label": "Tow Authorized",
                    "dataOn": "Yes",
                    "dataOff": "No"
                },
                {
                    "type": "text",
                    "name": "tow_company",
                    "label": "Tow Company",
                    "placeholder": "e.g. Davis Impound",
                    "stipulation": {
                        "field": "tow_authorized",
                        "value": true
                    }
                },
                {
                    "type": "text",
                    "name": "tow_destination",
                    "label": "Vehicle Destination",
                    "placeholder": "e.g. Mission Row Impound",
                    "stipulation": {
                        "field": "tow_authorized",
                        "value": true
                    }
                }
            ]
        },
        {
            "type": "better-switch",
            "name": "photographs_taken",
            "label": "Photographs Taken",
            "dataOn": "Yes",
            "dataOff": "No"
        },
        {
            "type": "section",
            "title": "Payment & Hearing"
        },
        {
            "type": "textarea",
            "name": "payment_instructions",
            "label": "Payment & Compliance Instructions",
            "placeholder": "Provide payment mailing address, online payment portal, or instructions for contesting the citation..."
        },
        {
            "type": "textarea",
            "name": "additional_notes",
            "label": "Additional Notes",
            "placeholder": "Document any additional remarks, witness information, or safety concerns."
        },
        {
            "type": "hidden",
            "name": "vehicle_insurance_provider",
            "generateValue": {
                "type": "choice",
                "options": [
                    "Maze Bank Insurance",
                    "Fleeca Insurance"
                ]
            }
        },
        {
            "type": "hidden",
            "name": "vehicle_insurance_policy",
            "generateValue": {
                "type": "pattern",
                "pattern": "POL-{{digits:7}}"
            }
        },
        {
            "type": "hidden",
            "name": "respond_by_date",
            "generateValue": {
                "type": "pattern",
                "pattern": "{{date+14:dd/MMM/yyyy}}",
                "uppercase": true
            }
        },
        {
            "type": "hidden",
            "name": "inventory_number",
            "generateValue": {
                "type": "pattern",
                "pattern": "INV-{{digits:5}}"
            }
        }
    ],
    "countyCityStipulation": true
}