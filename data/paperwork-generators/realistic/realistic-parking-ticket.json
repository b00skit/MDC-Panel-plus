{
    "id": "realistic-parking-ticket",
    "title": "Parking Ticket",
    "description": "A realistic parking ticket citation.",
    "icon": "SquareParking",
    "icon_color": "#1e6da5",
    "is_html_output": true,
    "custom_button_text": "Open MDC Record",
    "custom_button_link": "https://mdc.gta.world/record/{{vehicle_owner}}",
    "custom_button_replace_spaces": true,
    "output": "<table style=\"width:100%;font-family:'Times New Roman',serif;border-collapse:collapse;border:2px solid #111;background-color:white;color:#111;\">\n  <tbody>\n    <tr>\n      <td colspan=\"4\" style=\"text-align:center;padding:10px;border-bottom:2px solid #111;\">\n        <h1 style=\"font-family:Arial,sans-serif;font-size:1.6rem;font-weight:700;margin:0;text-transform:uppercase;\">County of Los Santos</h1>\n        <h2 style=\"font-family:Arial,sans-serif;font-size:1.05rem;font-weight:600;margin:2px 0 0;\">Notice of Parking Violation</h2>\n        <p style=\"margin:4px 0 0;font-size:0.85rem;\">{{officers.0.department}} &bull; {{officers.0.divDetail}}</p>\n      </td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Citation #:</strong> {{citation_number}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Date of Issue:</strong> {{general.date}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Time Issued:</strong> {{general.time}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;font-weight:bold;\">PAY ON OR BEFORE: {{addDays general.date 28}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Officer:</strong> {{officers.0.name}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Badge #:</strong> {{officers.0.badgeNumber}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Unit / Call Sign:</strong> {{general.callSign}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Assignment:</strong> {{officer_assignment}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Officer Contact:</strong> {{officer_contact}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\" colspan=\"2\"><strong>Officer Signature:</strong> {{officer_signature}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #ccc;\"><strong>Contest By:</strong> {{respond_by_date}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"background-color:#e5e7eb;padding:6px;border-top:2px solid #111;border-bottom:1px solid #bbb;text-align:center;font-weight:bold;\">Vehicle Identification</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Plate:</strong> {{#if vehicle_plate}}{{vehicle_plate}}{{else}}N/A{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Reg. State:</strong> {{#if vehicle_registration_state}}{{vehicle_registration_state}}{{else}}N/A{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Reg. Status:</strong> {{#if vehicle_registered}}Valid{{else}}Expired/None{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Owner:</strong> {{#if vehicle_owner}}{{vehicle_owner}}{{else}}N/A{{/if}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Year:</strong> {{vehicle_year}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Make &amp; Model:</strong> {{vehicle_make_model}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Body Style:</strong> {{vehicle_body_style}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Color:</strong> {{vehicle_color}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Vehicle Identification Number:</strong> {{vehicle_vin}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Insurance Status:</strong> {{#if vehicle_insured}}Insured{{else}}Uninsured{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Insurance Expiration:</strong> {{insurance_expiration}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Insurance Provider:</strong> {{insurance_provider}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Policy #:</strong> {{insurance_policy_number}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Location of Violation:</strong> {{location.street}}, {{location.district}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Meter / Zone ID:</strong> {{meter_number}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Observation Start:</strong> {{violation_observed_from}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Observation End:</strong> {{violation_observed_to}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Hazard Lights:</strong> {{#if hazard_lights}}Activated{{else}}Not Activated{{/if}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"background-color:#e5e7eb;padding:6px;border-top:2px solid #111;border-bottom:1px solid #bbb;text-align:center;font-weight:bold;\">Violation Details</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Violation Category:</strong> {{violation_category}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Municipal Code:</strong> {{violation_code}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Section/Subsection:</strong> {{violation_section}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"padding:0;border:1px solid #bbb;border-left:none;border-right:none;\">\n        <table style=\"width:100%;border-collapse:collapse;\">\n          <tbody>\n            <tr style=\"background-color:#f3f4f6;\">\n              <td style=\"padding:6px;font-weight:bold;border-bottom:1px solid #ccc;\" colspan=\"3\">Description of Violation</td>\n              <td style=\"padding:6px;font-weight:bold;border-bottom:1px solid #ccc;text-align:right;\">Fine</td>\n            </tr>\n            {{#each charges}}\n            <tr>\n              <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"3\">{{#with (lookup @root.penalCode chargeId)}}{{charge}}{{/with}}</td>\n              <td style=\"padding:6px;border-bottom:1px solid #eee;text-align:right;\">${{fine}}</td>\n            </tr>\n            {{/each}}\n            <tr>\n              <td style=\"padding:6px;text-align:right;font-weight:bold;border-top:1px solid #111;\" colspan=\"3\">Total Amount Due:</td>\n              <td style=\"padding:6px;text-align:right;font-weight:bold;border-top:1px solid #111;\">${{charges_total_fine}}</td>\n            </tr>\n          </tbody>\n        </table>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"padding:10px;white-space:pre-wrap;border-bottom:2px solid #111;\">{{parking_reasons}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"background-color:#e5e7eb;padding:6px;border-top:2px solid #111;border-bottom:1px solid #bbb;text-align:center;font-weight:bold;\">Tow / Additional Actions</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Tow Authorized:</strong> {{#if tow_authorized}}Yes{{else}}No{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Photographs Taken:</strong> {{#if photographs_taken}}Yes{{else}}No{{/if}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Tow Company:</strong> {{tow_company}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Tow Destination:</strong> {{tow_destination}}</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Vehicle Inventory / Property Receipt #:</strong> {{inventory_number}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Notes:</strong> {{additional_notes}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"background-color:#e5e7eb;padding:6px;border-top:2px solid #111;border-bottom:1px solid #bbb;text-align:center;font-weight:bold;\">Payment &amp; Hearing Information</td>\n    </tr>\n    <tr>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\" colspan=\"2\"><strong>Court Appearance:</strong> {{court_location}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Court Date:</strong> {{court_date}}</td>\n      <td style=\"padding:6px;border-bottom:1px solid #eee;\"><strong>Court Time:</strong> {{court_time}}</td>\n    </tr>\n    <tr>\n      <td colspan=\"4\" style=\"padding:8px;font-size:0.85rem;white-space:pre-wrap;border-top:1px solid #bbb;\">{{payment_instructions}}</td>\n    </tr>\n  </tbody>\n</table>",
    "form": [
        {
            "type": "section",
            "title": "Citation Details"
        },
        {
            "type": "general",
            "name": "general"
        },
        {
            "type": "text",
            "name": "citation_number",
            "label": "Citation Number",
            "placeholder": "e.g. PT-240152",
            "required": true
        },
        {
            "type": "section",
            "title": "Officer Information"
        },
        {
            "type": "officer",
            "name": "officers",
            "showBadgeNumber": true,
            "showDivDetail": true,
            "multi": false
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "officer_assignment",
                    "label": "Assignment / Beat",
                    "placeholder": "e.g. Central Parking Enforcement"
                },
                {
                    "type": "text",
                    "name": "officer_contact",
                    "label": "Officer Contact Number",
                    "placeholder": "e.g. (555) 010-4455"
                }
            ]
        },
        {
            "type": "group",
            "fields": [
                 {
                    "type": "text",
                    "name": "officer_signature",
                    "label": "Officer Signature",
                    "placeholder": "Full name or digital signature"
                },
                {
                    "type": "text",
                    "name": "respond_by_date",
                    "label": "Contest / Respond By",
                    "placeholder": "DD/MM/YYYY"
                }
            ]
        },
        {
            "type": "section",
            "title": "Vehicle Identification"
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "better-switch",
                    "name": "vehicle_registered",
                    "label": "Registration Status",
                    "dataOn": "Registered",
                    "dataOff": "Unregistered",
                    "defaultValue": true
                },
                {
                    "type": "text",
                    "name": "vehicle_owner",
                    "label": "Registered Owner",
                    "placeholder": "Firstname Lastname",
                    "stipulation": {
                        "field": "vehicle_registered",
                        "value": true
                    }
                },
                {
                    "type": "text",
                    "name": "vehicle_plate",
                    "label": "Identification Plate",
                    "placeholder": "###XXX",
                    "stipulation": {
                        "field": "vehicle_registered",
                        "value": true
                    }
                },
                {
                    "type": "text",
                    "name": "vehicle_registration_state",
                    "label": "Registration State",
                    "placeholder": "SA",
                    "stipulation": {
                        "field": "vehicle_registered",
                        "value": true
                    }
                }
            ]
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "vehicle_year",
                    "label": "Vehicle Year",
                    "placeholder": "2024"
                },
                {
                    "type": "datalist",
                    "name": "vehicle_make_model",
                    "label": "Make & Model",
                    "placeholder": "e.g. Benefactor Dubsta",
                    "optionsSource": "vehicles",
                    "required": true
                },
                {
                    "type": "text",
                    "name": "vehicle_body_style",
                    "label": "Body Style",
                    "placeholder": "e.g. SUV"
                },
                {
                    "type": "text",
                    "name": "vehicle_color",
                    "label": "Primary Color",
                    "placeholder": "e.g. Silver"
                }
            ]
        },
        {
            "type": "text",
            "name": "vehicle_vin",
            "label": "Vehicle Identification Number",
            "placeholder": "17-character VIN"
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "better-switch",
                    "name": "vehicle_insured",
                    "label": "Insurance Status",
                    "dataOn": "Insured",
                    "dataOff": "Uninsured",
                    "defaultValue": true
                },
                {
                    "type": "text",
                    "name": "insurance_provider",
                    "label": "Insurance Provider",
                    "placeholder": "e.g. Fleeca Insurance",
                    "stipulation": {
                        "field": "vehicle_insured",
                        "value": true
                    }
                },
                {
                    "type": "text",
                    "name": "insurance_policy_number",
                    "label": "Policy Number",
                    "placeholder": "Policy #",
                    "stipulation": {
                        "field": "vehicle_insured",
                        "value": true
                    }
                }
            ]
        },
        {
            "type": "text",
            "name": "insurance_expiration",
            "label": "Insurance Expiration",
            "placeholder": "DD/MM/YYYY",
            "stipulation": {
                "field": "vehicle_insured",
                "value": true
            }
        },
        {
            "type": "section",
            "title": "Location & Observation"
        },
        {
            "type": "location",
            "name": "location",
            "showDistrict": true
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "meter_number",
                    "label": "Meter / Zone Identifier",
                    "placeholder": "e.g. Meter 24B"
                },
                {
                    "type": "text",
                    "name": "violation_observed_from",
                    "label": "Observation Start",
                    "placeholder": "HH:MM"
                },
                {
                    "type": "text",
                    "name": "violation_observed_to",
                    "label": "Observation End",
                    "placeholder": "HH:MM"
                }
            ]
        },
        {
            "type": "better-switch",
            "name": "hazard_lights",
            "label": "Hazard Lights",
            "dataOn": "Activated",
            "dataOff": "Not Activated"
        },
        {
            "type": "section",
            "title": "Violation Details"
        },
        {
            "type": "dropdown",
            "name": "violation_category",
            "label": "Violation Category",
            "placeholder": "Select category",
            "options": [
                "Meter Violation",
                "No Parking Zone",
                "Permit Required Area",
                "Blocking Driveway",
                "Fire Hydrant",
                "Red Zone / Fire Lane",
                "Disabled Parking",
                "Other"
            ]
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "violation_code",
                    "label": "Municipal Code",
                    "placeholder": "e.g. LSCC §12.21"
                },
                {
                    "type": "text",
                    "name": "violation_section",
                    "label": "Section / Subsection",
                    "placeholder": "e.g. (a)(2)"
                }
            ]
        },
        {
            "type": "section",
            "title": "Charges"
        },
        {
            "type": "charge",
            "name": "charges",
            "showClass": false,
            "showOffense": true,
            "allowedTypes": {
                "I": true
            },
            "customFields": [
                {
                    "type": "text",
                    "name": "fine",
                    "label": "Fine",
                    "placeholder": "Fine Amount"
                }
            ]
        },
        {
            "type": "hidden",
            "name": "charges_total_fine",
            "value": "{{#with (sum (pluck charges 'fine'))}}{{this}}{{/with}}"
        },
        {
            "type": "textarea",
            "name": "parking_reasons",
            "label": "Narrative / Remarks",
            "placeholder": "Detail the violation as observed, including any relevant signage, distance to hydrant, or witness statements...",
            "required": true
        },
        {
            "type": "section",
            "title": "Tow / Additional Actions"
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "better-switch",
                    "name": "tow_authorized",
                    "label": "Tow Authorized",
                    "dataOn": "Yes",
                    "dataOff": "No"
                },
                {
                    "type": "text",
                    "name": "tow_company",
                    "label": "Tow Company",
                    "placeholder": "e.g. Davis Impound",
                    "stipulation": {
                        "field": "tow_authorized",
                        "value": true
                    }
                },
                {
                    "type": "text",
                    "name": "tow_destination",
                    "label": "Vehicle Destination",
                    "placeholder": "e.g. Mission Row Impound",
                    "stipulation": {
                        "field": "tow_authorized",
                        "value": true
                    }
                }
            ]
        },
        {
            "type": "text",
            "name": "inventory_number",
            "label": "Inventory / Property Receipt #",
            "placeholder": "e.g. INV-24115",
            "stipulation": {
                "field": "tow_authorized",
                "value": true
            }
        },
        {
            "type": "better-switch",
            "name": "photographs_taken",
            "label": "Photographs Taken",
            "dataOn": "Yes",
            "dataOff": "No"
        },
        {
            "type": "section",
            "title": "Payment & Hearing"
        },
        {
            "type": "group",
            "fields": [
                {
                    "type": "text",
                    "name": "court_location",
                    "label": "Court / Hearing Location",
                    "placeholder": "e.g. LS Superior Court, Traffic Division"
                },
                {
                    "type": "text",
                    "name": "court_date",
                    "label": "Court Date",
                    "placeholder": "DD/MM/YYYY"
                },
                {
                    "type": "text",
                    "name": "court_time",
                    "label": "Court Time",
                    "placeholder": "HH:MM"
                }
            ]
        },
        {
            "type": "textarea",
            "name": "payment_instructions",
            "label": "Payment & Compliance Instructions",
            "placeholder": "Provide payment mailing address, online payment portal, or instructions for contesting the citation..."
        },
        {
            "type": "textarea",
            "name": "additional_notes",
            "label": "Additional Notes",
            "placeholder": "Document any additional remarks, witness information, or safety concerns."
        }
    ],
    "countyCityStipulation": true
}
